[build]
  publish = "."
  # Netlify already installs dependencies; using npm ci makes builds deterministic.
  command = "npm ci"

[build.environment]
  NODE_VERSION = "22"

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

[functions."backup-scheduled"]
  schedule = "0 */6 * * *"
# Ensure Netlify Identity confirm links and pretty /login route work
[[redirects]]
  from = "/login"
  to = "/login.html"
  status = 301
  force = true

[[redirects]]
  from = "/.netlify/identity/*"
  to = "/.netlify/identity/:splat"
  status = 200
  force = true
